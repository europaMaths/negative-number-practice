<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Negative Number Practice</title>
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        button {
            margin-top: 10px;
        }
        .feedback {
            margin-top: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Practice Negative Numbers</h1>

    <label for="operations">Choose operations:</label><br>
    <input type="checkbox" id="addition" checked> Addition
    <input type="checkbox" id="subtraction" checked> Subtraction
    <input type="checkbox" id="multiplication" checked> Multiplication
    <input type="checkbox" id="division" checked> Division<br><br>

    <label for="minValue">Minimum value:</label>
    <input type="number" id="minValue" value="-10"><br>
    <label for="maxValue">Maximum value:</label>
    <input type="number" id="maxValue" value="10"><br><br>

    <button onclick="generateQuestion()">Generate Question</button><br><br>

    <div id="question"></div><br>
    <input type="number" id="userAnswer">
    <button onclick="checkAnswer()">Check Answer</button><br><br>

    <div class="feedback" id="feedback"></div><br>
    <button onclick="giveUp()">Give Up</button>

    <script>
        let currentQuestion = {};

        function generateQuestion() {
            const min = parseInt(document.getElementById('minValue').value);
            const max = parseInt(document.getElementById('maxValue').value);

            // Get selected operations
            const operations = [];
            if (document.getElementById('addition').checked) operations.push('+');
            if (document.getElementById('subtraction').checked) operations.push('-');
            if (document.getElementById('multiplication').checked) operations.push('\\times');
            if (document.getElementById('division').checked) operations.push('\\div');

            const operation = operations[Math.floor(Math.random() * operations.length)];
            var num1 = Math.floor(Math.random() * (max - min + 1)) + min;
            var num2 = Math.floor(Math.random() * (max - min + 1)) + min;

            while (operation === '\\div' && num2 === 0) num2 = Math.floor(Math.random() * (max - min + 1)) + min; // Avoid division by zero
            if (operation === '\\div' && (num1 % num2 !== 0)) {
                num1 = num1 * num2 // Ensure whole number results for division
            }

            // Store the question for later checking
            currentQuestion = { num1, num2, operation };
            const questionText = `\\(${num1} ${operation} ${num2} = ?\\)`;
            document.getElementById('question').innerHTML = questionText;
            MathJax.Hub.Queue(["Typeset", MathJax.Hub, "question"]);
            document.getElementById('feedback').innerText = '';
        }

        function checkAnswer() {
            const userAnswer = parseInt(document.getElementById('userAnswer').value);
            let correctAnswer;

            switch (currentQuestion.operation) {
                case '+':
                    correctAnswer = currentQuestion.num1 + currentQuestion.num2;
                    break;
                case '-':
                    correctAnswer = currentQuestion.num1 - currentQuestion.num2;
                    break;
                case '\\times':
                    correctAnswer = currentQuestion.num1 * currentQuestion.num2;
                    break;
                case '\\div':
                    correctAnswer = currentQuestion.num1 / currentQuestion.num2;
                    break;
            }

            if (userAnswer === correctAnswer) {
                document.getElementById('feedback').innerText = 'Correct! Well done!';
            } else {
                document.getElementById('feedback').innerText = 'Wrong. Try again!';
            }
        }

        function giveUp() {
            const correctAnswer = currentQuestion.operation === '+'
                ? currentQuestion.num1 + currentQuestion.num2
                : currentQuestion.operation === '-'
                ? currentQuestion.num1 - currentQuestion.num2
                : currentQuestion.operation === '\\times'
                ? currentQuestion.num1 * currentQuestion.num2
                : currentQuestion.num1 / currentQuestion.num2;

            document.getElementById('feedback').innerText = `The correct answer is: ${correctAnswer}.`;
            MathJax.Hub.Queue(["Typeset", MathJax.Hub, "feedback"]);
        }
    </script>
</body>
</html>
